<html>
  <head>
    <title>Mastercard</title>
    <script language="javascript" type="text/javascript" src="/touchscreentoolkit/lib/javascripts/touchScreenToolkit.js" defer="true"></script>
    <script> 
      var tt_cancel_destination = "/patients/show/?patient_id=" + "<%=@patient.id%>&user_id=<%= @user['user_id'] %>"

      var total  = <%="#{session[:mastercard_ids].length.to_i}" rescue 0%>;
      var current = <%="#{session[:mastercard_counter].to_i + 1}" rescue 0%>;

      function next(){
        var iframe =  __$("main");
        frameDoc = (iframe.contentDocument) ? iframe.contentDocument : iframe.contentWindow.document;

        if (f$("page1")[0].style.display == "none"){
          try{
            var nodes = f$("page1")
            for(var i = 0; i < nodes.length; i ++){
              nodes[i].style.display = "block";
            }
            var nodes2 = f$("page2")
            for(var i = 0; i < nodes.length; i ++){
              nodes2[i].style.display = "none"
            }
          }catch(ex){}
          __$("next").innerHTML = "<span>Next Page</span>"
        }else{
          try{
            var nodes = f$("page1")
            for(var i = 0; i < nodes.length; i ++){
              nodes[i].style.display = "none"
            }
            var nodes2 = f$("page2")
            for(var i = 0; i < nodes2.length; i ++){
              nodes2[i].style.display = "block"
            }
          }catch(ex){}
          __$("next").innerHTML = "<span>Prev Page</span>"
        }

      }

            
      function f$(clas){
        return frameDoc.getElementsByClassName(clas);
      }

    </script>

    <style>
      .dots {
        display: none;
      }

      body {
        background-color: #000;
      }
      #main {
        width: 99.7%;
        height: 88%;
        -moz-user-select:none;
      }

      #msgBox table {
        -moz-user-select:none;
        font-size: 27px;
        margin-left: 10px;
        margin-right: 10px;
        position: absolute;
        top: 25px;
      }

      #msgBox {
        background: none repeat scroll 0 0 #40f999;
        border: 5px outset #40f999;
        border-radius: 15px 15px 15px 15px;
        float: right;
        font-size: 1.2em;
        height: 130px;
        left: 260px;
        padding: 20px;
        position: absolute;
        text-align: left;
        top: 150px;
        width: 450px;
        z-index: 842;
      }

      #content {
        background:#FFFFFF;
        position:absolute;
        left:50%;
        top:50%;
        width:1000px;
        height:750px;
        margin-left:-500px;
        margin-top:-380px;
        -moz-user-select:none;

      }

      #footer {
        background-color:#333333;
        color:#CADCEA;
        height:80px;
        width:100%;
        bottom:0px;
        position:absolute;
        overflow:hidden;
        -moz-user-select:none;
      }

    </style>

  </head>
  <body>
    <div id ="content" style="margin-left: -50%;">
      <iframe id="main" style="border: 0px solid #fff;"
              src="/patients/mastercard_printable?patient_id=<%=@patient.id%>&type=3">
      </iframe>

      <div id="footer" style="height: 12%;">

        <button onclick="window.location = tt_cancel_destination;" class="button navButton green"
                id="nextButton" style="float: right; margin-right: 10px;" ><span>Finish</span>
        </button>


        <button id="next" class="button navButton blue" style="float: right;"
                onmousedown="next()">

          <span>
            Next Page
          </span>
        </button>
        <button class="button navButton blue" style="float: right;"
                onmousedown="window.location = '/patients/print_mastercard?patient_id=<%=@patient.id%>'">
          <span>
            Print Mastercard
          </span>
        </button>
      </div>


    </div>
  </body>
</html>

<script>

</script>
